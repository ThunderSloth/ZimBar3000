(?(DEFINE)(?'enter_game'enters the game)(?'visit'visits you unexpectedly)(?'follow_in'follows? .* in)(?'from_door'emerges? from a thaumic door which appears in midair)(?'medina'(stumble|storm)s? in from one of the alleys)(?'unhide1'You notice )(?'unhide2'nearby)(?'from_room'(arrives?|swaggers? in nautically|floats? in) from the )(?'directions'(?<ns>north|south)?(?(ns)(east|west)?|(east|west)))(?'divine_hand1'(A torrent of water appears suddenly, depositing|A brief splattering of raindrops land on the ground as) )(?'divine_hand2'(with a loud squelch|appears?, accompanied by the tang of ozone))(?'divine_hand3'Lengths of whirling cyan cotton materialise from thin air.  )(?'divine_hand4'steps? out from \w+ midst wearing a translucent cotton robe of the most impeccable taste imaginable.  The robe and whirling cotton gradually fade from view)(?'divine_hand5'(appears? with a gentle fall of thistle green fluff|swims? in from elsewhere))(?'broom1'There is the faintest of sounds, as of a gnat yawning, then a WHOOSH sound.  Suddenly there is pandemonium as )(?'broom2'arrives on her broomstick from somewhere above and barrels into you, almost knocking you down.  She apologises sheepishly)(?'smugs'runs? out of the shadows)(?'shades'(suddenly appears? from somewhere in the gloom|arrives? from elsewhere)))^(?<uh>(?P>unhide1))?(?<dh>(?P>divine_hand1))?(?<dh2>(?P>divine_hand3))?(?<brm>(?P>broom1))?(?<thyngs>.*) (?(uh)(?P>unhide2)|(?(dh2)(?P>divine_hand4)|(?(brm)(?P>broom2)|(?(dh)|((?P>divine_hand2)|(?P>divine_hand5)|(?P>from_room)(?<direction>(?P>directions))|(?P>enter_game)|(?P>visit)|(?P>follow_in)|(?P>from_door)|(?P>medina)|(?P>shades)|(?P>smugs))))))[.!]$
