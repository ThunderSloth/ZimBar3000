(?(DEFINE)(?'enter_game'enters the game)(?'visit'visits you unexpectedly)(?'follow_in'follows? .* in)(?'from_door'emerges? from a thaumic door which appears in midair)(?'medina'(stumble|storm)s? in from one of the alleys)(?'from_room'arrives? from the )(?'directions'(?<ns>north|south)?(?(ns)(east|west)?|(east|west)))(?'divine_hand1'(A torrent of water appears suddenly, depositing|A brief splattering of raindrops land on the ground as) )(?'divine_hand2'(with a loud squelch|appears?, accompanied by the tang of ozone))(?'divine_hand3'(appears? with a gentle fall of thistle green fluff|swims? in from elsewhere))(?'broom1'There is the faintest of sounds, as of a gnat yawning, then a WHOOSH sound.  Suddenly there is pandemonium as )(?'broom2'arrives on her broomstick from somewhere above and barrels into you, almost knocking you down.  She apologises sheepishly)(?'shades'(suddenly appears? from somewhere in the gloom|arrives? from elsewhere)))^(?<dh>(?P>divine_hand1))?(?<brm>(?P>broom1))?(?<thyngs>.*) (?(brm)(?P>broom2)|(?(dh)|((?P>divine_hand2)|(?P>divine_hand3)|(?P>from_room)(?<direction>(?P>directions))|(?P>enter_game)|(?P>visit)|(?P>follow_in)|(?P>from_door)|(?P>medina)|(?P>shades))))[.!]$
